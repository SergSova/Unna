!function(t){t(document).ready(function(){function i(e,i){imgPrev=e.find("img").attr("src"),imgNext=i.find("img").attr("src"),t(".apart_slider_nav .prev_image div").hide().fadeIn(600).css("background-image","url("+imgPrev+")"),t(".apart_slider_nav .next_image div").hide().fadeIn(600).css("background-image","url("+imgNext+")")}function r(){var e=t(".apart_slider .slick-current"),r=e.next(),a=t(".apart_slider .slick-slide").length,s=t('.apart_slider .slick-slide[data-slick-index="'+(a-1)+'"]');i(s,r)}function a(t,e){for(var i=e[0],r=0,a=Math.abs(t-i),s=0;s<e.length;s++){var n=Math.abs(t-e[s]);n<a&&(a=n,i=e[s],r=s)}return r+=1}function s(){var e=100*x.outerWidth()/t(".range-slider").width(),i=100*P.outerWidth()/t(".range-slider").width(),r=P.outerWidth(),a=x.closest(".range-slider"),s=a.width(),n=100-e-i;W.width(0).css("left","0%"),H.width(0).css("left","100%"),P.css("left",s-r-1),I.width(n+"%").css("left",x.outerWidth()),x.css("left",parseInt(x.css("left"))/(x.parent().width()/100)+"%"),P.css("left",parseInt(P.css("left"))/(P.parent().width()/100)+"%")}function n(){t(".range-slider").each(function(){var e=t(this),i=(e.find(".ui-slider-range-left"),e.find(".ui-slider-range-right")),r=e.find(".ui-slider-range"),a=e.find(".left-handle"),s=e.find(".right-handle"),n=e.width(),l=100*parseInt(a.css("left"))/n;lftHW=100*a.outerWidth()/n,rgtHW=100*s.outerWidth()/n,rgtHP=100*parseInt(s.css("left"))/n,rgtLW=100-(rgtHP+rgtHW),cntrHP=l+lftHW,cntrHW=100-(cntrHP+100-rgtHP),r.css("left",cntrHP+"%").width(cntrHW+"%"),i.css("left",rgtHP+rgtHW+"%")}),t(".left-handle").each(function(){var e=t(this),i=t(".range-slider").width(),r=100*parseInt(e.css("left"))/i,a=2.61*t(window).width()/100,s=r/100*a+4;t(this).css("left",parseInt(t(this).css("left"))/(t(this).parent().width()/100)+"%"),t(this).hasClass("moved")&&(t(this).width(s).height(s),mgnCircle=e.outerWidth()/2,e.css("margin-top",-mgnCircle)),h(this,1),l(this,1),o(this,2)}),t(".right-handle").each(function(){var e=t(this),i=t(".range-slider").width(),r=100*parseInt(e.css("left"))/i,a=2.61*t(window).width()/100,s=r/100*a+4;t(this).css("left",parseInt(t(this).css("left"))/(t(this).parent().width()/100)+"%"),t(this).hasClass("moved")&&(t(this).width(s).height(s),mgnCircle=e.outerWidth()/2,e.css("margin-top",-mgnCircle)),h(this,2),l(this,2),o(this,2)})}function l(e,i){var r=t(e),a=t(".range-slider").width(),s=parseInt(r.css("left")),n=100*r.outerWidth()/a,l=100*s/a,o=r.closest(".range-slider").find(".ui-slider-range");r.closest(".range-slider");1==i?(P=r.closest(".range-slider").find(".right-handle"),rightPos=100*parseInt(P.css("left"))/a,leftPos=100*(s+n)/a,line=r.closest(".range-slider").find(".ui-slider-range-left"),widhtCenter=100-(l+n+(100-rightPos)),line.width(l+"%"),o.css("left",l+n+"%").width(widhtCenter+"%"),mgnCircle=r.outerWidth()/2,r.css("margin-top",-mgnCircle)):(x=r.closest(".range-slider").find(".left-handle"),leftWidth=100*x.outerWidth()/a,leftPos=100*parseInt(x.css("left"))/a,rightPos=100*s/a,widhtCenter=100-(leftWidth+leftPos+(100-rightPos)),line=r.closest(".range-slider").find(".ui-slider-range-right"),line.width(100-l-n+"%").css("left",l+n+"%"),o.css("left",leftWidth+leftPos+"%").width(widhtCenter+"%"),mgnCircle=r.outerWidth()/2,r.css("margin-top",-mgnCircle))}function o(e,i){var r=t(e).closest(".range-slider"),a=t(".range-slider").width(),s=r.find(".left-limit-value"),n=r.find(".right-limit-value"),l=r.find(".left-handle"),o=100*parseInt(l.css("left"))/a,h=r.find(".right-handle"),d=100*parseInt(h.css("left"))/a,c=100*h.outerWidth()/a,f=s.data("value"),p=n.data("value"),g=p-f,u=Math.round(o*g/100+f),m=Math.round((d+c)*g/100+f),w=r.find("input[name=full-area-from]"),v=r.find("input[name=full-area-to]");0==w.length&&(w=r.find("input[name=price-from]"),v=r.find("input[name=price-to]")),1==i?(l.attr("data-value",u),w.val(u)):(h.attr("data-value",m),v.val(m))}function h(e,i){var r=t(e),a=r.closest(".range-slider"),s=t(".range-slider").width(),n=100*t(e).outerWidth()/s,l=100*parseInt(r.css("left"))/s,o=a.find(".left-limit-value"),h=a.find(".right-limit-value");circle=2.61*t(window).width()/100,widthH=l/100*circle+4,r.addClass("moved").width(widthH).height(widthH),(0==l||l+n>=100)&&r.removeClass("moved").css({width:"2.61vw",height:"2.61vw"}),window.matchMedia("(max-width: 1024px)").matches&&(circle=7.2*t(window).width()/100,widthH=l/100*circle+4,widthH<11&&(widthH=11),r.addClass("moved").width(widthH).height(widthH),(0==l||l+n>=100)&&r.removeClass("moved").css({width:"7.2vmin",height:"7.2vmin"})),1==i?l>0?o.fadeIn():o.hide():l+n<100?h.fadeIn():h.hide()}function d(e,i){var r=t(e),a=r.outerWidth(),s=r.closest(".range-slider"),n=s.find(".left-handle"),l=n.outerWidth(),o=parseInt(n.css("left")),h=s.width();return i>=h-a?i=h-a:i<=l+o&&(i=l+o),i}function c(e,i){var r=t(e),a=r.outerWidth(),s=r.closest(".range-slider"),n=s.find(".right-handle"),l=parseInt(n.css("left"));return i+a>=l&&(i=l-a),i}function f(e){var i=t(e),r=i.data("link"),a=i.closest(".premise_media").find("a[data-link="+r+"]"),s=i.closest(".premise").find(".premise_info td:nth-child(1) .num"),n=i.closest(".premise").find(".premise_info td:nth-child(2) .num"),l=a.data("size"),o=a.data("price");i.closest("svg").find("polygon, path, rect").removeClass("active"),i.addClass("active"),l&&s.hide().html(l+"<span>м<sup>2</sup></span>").stop().fadeIn(700),o&&n.hide().html(o+"<span>грн/м<sup>2</sup></span>").stop().fadeIn(700)}function p(t){for(var e=t+"=",i=decodeURIComponent(document.cookie),r=i.split(";"),a=0;a<r.length;a++){for(var s=r[a];" "==s.charAt(0);)s=s.substring(1);if(0==s.indexOf(e))return s.substring(e.length,s.length)}return""}if(t(".apart_slider").slick({infinite:!0,slidesToShow:1,slidesToScroll:1,fade:!0,arrows:!0,speed:600}),window.matchMedia("(min-width: 992px)").matches){var g=t(".apart .left_block").height(),u=t(".apart_info").outerHeight(!0),m=g-u+5;t(".apart").height(g),t(".rooms ol").height(m)}if(t(".apart_inside_page").animate({opacity:1},600),t(".aparts").animate({opacity:1},200),sliderFlag=0,t(".apart_slider").on("beforeChange",function(e,r,a,s){var n=t(".apart_slider .slick-slide").length,l=s+1;l>=n&&(l=0),sliderFlag>s?a-2<0?a=n-1:a-=2:s==n-1&&(a=s-1,l=0);var o=t(this).find('.slick-slide[data-slick-index="'+a+'"]'),h=t(this).find('.slick-slide[data-slick-index="'+l+'"]');i(o,h),sliderFlag=s}),r(),window.matchMedia("(min-width: 992px)").matches){var g=t(".apart .left_block").height(),u=t(".apart_info").outerHeight(!0),m=g-u+5;t(".apart").height(g),setTimeout(function(){g=t(".apart .left_block").height(),t(".apart_inside").height(g),t(".parent_premise").height(t(".parent_premise > div").height())},100),t(".rooms ol").height(m),t(".wrap_parent_premise").height(m),t(".rooms ol").mCustomScrollbar();var w,v=t(".apart .share").height()+10;w=10!=v?t(".apart:first-child").outerHeight(!0)-v:t(".apart:first-child").outerHeight(!0);var _,C,k,b=t(".foot-line .circ");b.each(function(e){t(this).hasClass("active")&&(_=e,C=b.eq(_-1).attr("href"),k=b.eq(_+1).attr("href"))}),t(document).on("wheel",function(t){t.preventDefault(t),e=window.event||t.originalEvent,e.deltaY>0?k&&(window.location.href=k):window.location.href=C}),t(".aparts_list").mCustomScrollbar({alwaysShowScrollbar:1,mouseWheel:{scrollAmount:w},callbacks:{onScroll:function(){var e=this.mcs.draggerTop,i=t(".apart.current"),r=[];t(".apart").each(function(){r.push(t(this).offset().top)});var s=a(e,r);i.removeClass("current"),t(".apart:nth-child("+s+")").addClass("current")},onTotalScrollBack:function(){window.location.href=C},onTotalScroll:function(){k&&(window.location.href=k)},onInit:function(){t(document).off("wheel")}},advanced:{updateOnContentResize:!0}}),t(window).on("resize",function(){v=t(".apart .share").height()+10,g=t(".apart .left_block").height(),u=t(".apart_info").outerHeight(!0),m=g-u,t(".apart").height(g),t(".rooms ol").height(m),t(".wrap_parent_premise").height(m),t(".parent_premise").height(t(".parent_premise > div").height()),w=t(".apart.current").outerHeight(!0)-v,t(".aparts_list").mCustomScrollbar("update",{mouseWheel:{scrollAmount:w}})})}lightbox.option({albumLabel:"%1/%2",positionFromTop:0,wrapAround:!0,resizeDuration:300}),t("a").on("click",function(){t(this).attr("data-lightbox")&&t(".wrapper").addClass("lightboxOpened")}),t(window).on("resize",function(){t("#lightboxOverlay").hide(),t("#lightbox").hide(),t(".wrapper").removeClass("lightboxOpened")}),t("#lightbox, #lightbox .lb-close").on("click",function(){t(".wrapper").removeClass("lightboxOpened")}),t(".premises_filter input[type=radio]").on("click",function(){floor=t(this).data("floor"),floorDiv=t(".premise[data-floor="+floor+"]"),topF=floorDiv.position().top,t(".aparts_list").mCustomScrollbar("scrollTo",topF)});var W=t(".ui-slider-range-left"),H=t(".ui-slider-range-right"),I=t(".ui-slider-range"),x=t(".left-handle"),P=t(".right-handle");t(".left-handle, .right-handle").on("mousedown",function(){t(this).hasClass("left-handle")?(h(this,1),l(this,1)):(h(this,2),l(this,2))}),0!=x.length&&x.draggable({axis:"x",containment:"parent",drag:function(t,e){var i=e.position.left;e.position.left=c(this,i),h(this,1),l(this,1),o(this,1)},stop:function(){t(this).css("left",parseInt(t(this).css("left"))/(t(this).parent().width()/100)+"%"),filterApart(this)}}),0!=P.length&&P.draggable({axis:"x",containment:"parent",drag:function(t,e){var i=e.position.left;e.position.left=d(this,i),h(this,2),l(this,2),o(this,2)},stop:function(){t(this).css("left",parseInt(t(this).css("left"))/(t(this).parent().width()/100)+"%"),filterApart(this)}}),s(),t(window).on("resize",function(){n()});var y=t(".apart:nth-child(1) polygon[data-link=1]"),S=t(".apart:nth-child(2) path[data-link=1]");f(y),f(S),t("polygon, path, rect").on("mouseover",function(){f(this)}),t(".premise_media polygon, premise_media path, .premise_media rect, .parent_premise polygon, parent_premise path, .parent_premise rect").on("click",function(){var e=t(this).data("link"),i=t(this).closest("div").find("a[data-link="+e+"]"),r=i.attr("href");r&&(window.location.href=r,document.cookie="room="+e+";path=/;domain=")});var T=p("room"),M=t(".parent_premise *[data-link=1]");T&&(M=t(".parent_premise *[data-link="+T+"]")),f(M),t(".parent_premise svg").on("mouseleave",function(){f(M)})})}(jQuery);