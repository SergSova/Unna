!function(t){t(document).ready(function(){function e(e,i){imgPrev=e.find("img").attr("src"),imgNext=i.find("img").attr("src"),t(".apart_slider_nav .prev_image div").hide().fadeIn(600).css("background-image","url("+imgPrev+")"),t(".apart_slider_nav .next_image div").hide().fadeIn(600).css("background-image","url("+imgNext+")")}function i(){var i=t(".apart_slider .slick-current"),r=i.next(),s=t(".apart_slider .slick-slide").length,a=t('.apart_slider .slick-slide[data-slick-index="'+(s-1)+'"]');e(a,r)}function r(t,e){for(var i=e[0],r=0,s=Math.abs(t-i),a=0;a<e.length;a++){var n=Math.abs(t-e[a]);n<s&&(s=n,i=e[a],r=a)}return r+=1}function s(){var e=100*b.outerWidth()/t(".range-slider").width(),i=100*k.outerWidth()/t(".range-slider").width(),r=k.outerWidth(),s=b.closest(".range-slider"),a=s.width(),n=100-e-i;v.width(0).css("left","0%"),_.width(0).css("left","100%"),k.css("left",a-r-1),C.width(n+"%").css("left",b.outerWidth()),b.css("left",parseInt(b.css("left"))/(b.parent().width()/100)+"%"),k.css("left",parseInt(k.css("left"))/(k.parent().width()/100)+"%")}function a(){t(".range-slider").each(function(){var e=t(this),i=(e.find(".ui-slider-range-left"),e.find(".ui-slider-range-right")),r=e.find(".ui-slider-range"),s=e.find(".left-handle"),a=e.find(".right-handle"),n=e.width(),l=100*parseInt(s.css("left"))/n;lftHW=100*s.outerWidth()/n,rgtHW=100*a.outerWidth()/n,rgtHP=100*parseInt(a.css("left"))/n,rgtLW=100-(rgtHP+rgtHW),cntrHP=l+lftHW,cntrHW=100-(cntrHP+100-rgtHP),r.css("left",cntrHP+"%").width(cntrHW+"%"),i.css("left",rgtHP+rgtHW+"%")}),t(".left-handle").each(function(){var e=t(this),i=t(".range-slider").width(),r=100*parseInt(e.css("left"))/i,s=2.61*t(window).width()/100,a=r/100*s+4;t(this).css("left",parseInt(t(this).css("left"))/(t(this).parent().width()/100)+"%"),t(this).hasClass("moved")&&(t(this).width(a).height(a),mgnCircle=e.outerWidth()/2,e.css("margin-top",-mgnCircle)),h(this,1),n(this,1),l(this,2)}),t(".right-handle").each(function(){var e=t(this),i=t(".range-slider").width(),r=100*parseInt(e.css("left"))/i,s=2.61*t(window).width()/100,a=r/100*s+4;t(this).css("left",parseInt(t(this).css("left"))/(t(this).parent().width()/100)+"%"),t(this).hasClass("moved")&&(t(this).width(a).height(a),mgnCircle=e.outerWidth()/2,e.css("margin-top",-mgnCircle)),h(this,2),n(this,2),l(this,2)})}function n(e,i){var r=t(e),s=t(".range-slider").width(),a=parseInt(r.css("left")),n=100*r.outerWidth()/s,l=100*a/s,h=r.closest(".range-slider").find(".ui-slider-range");r.closest(".range-slider");1==i?(k=r.closest(".range-slider").find(".right-handle"),rightPos=100*parseInt(k.css("left"))/s,leftPos=100*(a+n)/s,line=r.closest(".range-slider").find(".ui-slider-range-left"),widhtCenter=100-(l+n+(100-rightPos)),line.width(l+"%"),h.css("left",l+n+"%").width(widhtCenter+"%"),mgnCircle=r.outerWidth()/2,r.css("margin-top",-mgnCircle)):(b=r.closest(".range-slider").find(".left-handle"),leftWidth=100*b.outerWidth()/s,leftPos=100*parseInt(b.css("left"))/s,rightPos=100*a/s,widhtCenter=100-(leftWidth+leftPos+(100-rightPos)),line=r.closest(".range-slider").find(".ui-slider-range-right"),line.width(100-l-n+"%").css("left",l+n+"%"),h.css("left",leftWidth+leftPos+"%").width(widhtCenter+"%"),mgnCircle=r.outerWidth()/2,r.css("margin-top",-mgnCircle))}function l(e,i){var r=t(e).closest(".range-slider"),s=t(".range-slider").width(),a=r.find(".left-limit-value"),n=r.find(".right-limit-value"),l=r.find(".left-handle"),h=100*parseInt(l.css("left"))/s,d=r.find(".right-handle"),o=100*parseInt(d.css("left"))/s,c=100*d.outerWidth()/s,p=a.data("value"),f=n.data("value"),g=f-p,u=Math.round(h*g/100+p),m=Math.round((o+c)*g/100+p),w=r.find("input[name=full-area-from]"),v=r.find("input[name=full-area-to]");0==w.length&&(w=r.find("input[name=price-from]"),v=r.find("input[name=price-to]")),1==i?(l.attr("data-value",u),w.val(u)):(d.attr("data-value",m),v.val(m))}function h(e,i){var r=t(e),s=r.closest(".range-slider"),a=t(".range-slider").width(),n=100*t(e).outerWidth()/a,l=100*parseInt(r.css("left"))/a,h=s.find(".left-limit-value"),d=s.find(".right-limit-value");circle=2.61*t(window).width()/100,widthH=l/100*circle+4,r.addClass("moved").width(widthH).height(widthH),(0==l||l+n>=100)&&r.removeClass("moved").css({width:"2.61vw",height:"2.61vw"}),window.matchMedia("(max-width: 1024px)").matches&&(circle=7.2*t(window).width()/100,widthH=l/100*circle+4,widthH<11&&(widthH=11),r.addClass("moved").width(widthH).height(widthH),(0==l||l+n>=100)&&r.removeClass("moved").css({width:"7.2vmin",height:"7.2vmin"})),1==i?l>0?h.fadeIn():h.hide():l+n<100?d.fadeIn():d.hide()}function d(e,i){var r=t(e),s=r.outerWidth(),a=r.closest(".range-slider"),n=a.find(".left-handle"),l=n.outerWidth(),h=parseInt(n.css("left")),d=a.width();return i>=d-s?i=d-s:i<=l+h&&(i=l+h),i}function o(e,i){var r=t(e),s=r.outerWidth(),a=r.closest(".range-slider"),n=a.find(".right-handle"),l=parseInt(n.css("left"));return i+s>=l&&(i=l-s),i}function c(e){var i=t(e),r=i.data("link"),s=i.closest(".premise_media").find("a[data-link="+r+"]"),a=i.closest(".premise").find(".premise_info td:nth-child(1) .num"),n=i.closest(".premise").find(".premise_info td:nth-child(2) .num"),l=s.data("size"),h=s.data("price");i.closest("svg").find("polygon, path, rect").removeClass("active"),i.addClass("active"),l&&a.hide().html(l+"<span>м<sup>2</sup></span>").stop().fadeIn(700),h&&n.hide().html(h+"<span>грн/м<sup>2</sup></span>").stop().fadeIn(700)}function p(t){for(var e=t+"=",i=decodeURIComponent(document.cookie),r=i.split(";"),s=0;s<r.length;s++){for(var a=r[s];" "==a.charAt(0);)a=a.substring(1);if(0==a.indexOf(e))return a.substring(e.length,a.length)}return""}if(t(".apart_slider").slick({infinite:!0,slidesToShow:1,slidesToScroll:1,fade:!0,arrows:!0,speed:600}),window.matchMedia("(min-width: 992px)").matches){var f=t(".apart .left_block").height(),g=t(".apart_info").outerHeight(!0),u=f-g+5;t(".apart").height(f),t(".rooms ol").height(u)}if(t(".apart_inside_page").animate({opacity:1},600),t(".aparts").animate({opacity:1},200),sliderFlag=0,t(".apart_slider").on("beforeChange",function(i,r,s,a){var n=t(".apart_slider .slick-slide").length,l=a+1;l>=n&&(l=0),sliderFlag>a?s-2<0?s=n-1:s-=2:a==n-1&&(s=a-1,l=0);var h=t(this).find('.slick-slide[data-slick-index="'+s+'"]'),d=t(this).find('.slick-slide[data-slick-index="'+l+'"]');e(h,d),sliderFlag=a}),i(),window.matchMedia("(min-width: 992px)").matches){var f=t(".apart .left_block").height(),g=t(".apart_info").outerHeight(!0),u=f-g+5;t(".apart").height(f),setTimeout(function(){f=t(".apart .left_block").height(),t(".apart_inside").height(f),t(".parent_premise").height(t(".parent_premise > div").height())},100),t(".rooms ol").height(u),t(".wrap_parent_premise").height(u),t(".rooms ol").mCustomScrollbar();var m,w=t(".apart .share").height()+10;m=10!=w?t(".apart:first-child").outerHeight(!0)-w:t(".apart:first-child").outerHeight(!0),t(".aparts_list").mCustomScrollbar({alwaysShowScrollbar:1,mouseWheel:{scrollAmount:m},callbacks:{onScroll:function(){var e=this.mcs.draggerTop,i=t(".apart.current"),s=[];t(".apart").each(function(){s.push(t(this).offset().top)});var a=r(e,s);i.removeClass("current"),t(".apart:nth-child("+a+")").addClass("current")}},advanced:{updateOnContentResize:!0}}),t(window).on("resize",function(){w=t(".apart .share").height()+10,f=t(".apart .left_block").height(),g=t(".apart_info").outerHeight(!0),u=f-g,t(".apart").height(f),t(".rooms ol").height(u),t(".wrap_parent_premise").height(u),t(".parent_premise").height(t(".parent_premise > div").height()),m=t(".apart.current").outerHeight(!0)-w,t(".aparts_list").mCustomScrollbar("update",{mouseWheel:{scrollAmount:m}})})}lightbox.option({albumLabel:"%1/%2",positionFromTop:0,wrapAround:!0,resizeDuration:300}),t("a").on("click",function(){t(this).attr("data-lightbox")&&t(".wrapper").addClass("lightboxOpened")}),t(window).on("resize",function(){t("#lightboxOverlay").hide(),t("#lightbox").hide(),t(".wrapper").removeClass("lightboxOpened")}),t("#lightbox, #lightbox .lb-close").on("click",function(){t(".wrapper").removeClass("lightboxOpened")}),t(".premises_filter input[type=radio]").on("click",function(){floor=t(this).data("floor"),floorDiv=t(".premise[data-floor="+floor+"]"),topF=floorDiv.position().top,t(".aparts_list").mCustomScrollbar("scrollTo",topF)});var v=t(".ui-slider-range-left"),_=t(".ui-slider-range-right"),C=t(".ui-slider-range"),b=t(".left-handle"),k=t(".right-handle");t(".left-handle, .right-handle").on("mousedown",function(){t(this).hasClass("left-handle")?(h(this,1),n(this,1)):(h(this,2),n(this,2))}),0!=b.length&&b.draggable({axis:"x",containment:"parent",drag:function(t,e){var i=e.position.left;e.position.left=o(this,i),h(this,1),n(this,1),l(this,1)},stop:function(){t(this).css("left",parseInt(t(this).css("left"))/(t(this).parent().width()/100)+"%"),filterApart(this)}}),0!=k.length&&k.draggable({axis:"x",containment:"parent",drag:function(t,e){var i=e.position.left;e.position.left=d(this,i),h(this,2),n(this,2),l(this,2)},stop:function(){t(this).css("left",parseInt(t(this).css("left"))/(t(this).parent().width()/100)+"%"),filterApart(this)}}),s(),t(window).on("resize",function(){a()});var W=t(".apart:nth-child(1) polygon[data-link=1]"),H=t(".apart:nth-child(2) path[data-link=1]");c(W),c(H),t("polygon, path, rect").on("mouseover",function(){c(this)}),t(".premise_media polygon, premise_media path, .premise_media rect, .parent_premise polygon, parent_premise path, .parent_premise rect").on("click",function(){var e=t(this).data("link"),i=t(this).closest("div").find("a[data-link="+e+"]"),r=i.attr("href");r&&(window.location.href=r,document.cookie="room="+e+";path=/;domain=")});var x=p("room"),I=t(".parent_premise *[data-link=1]");x&&(I=t(".parent_premise *[data-link="+x+"]")),c(I),t(".parent_premise svg").on("mouseleave",function(){c(I)})})}(jQuery);