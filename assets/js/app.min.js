function changeImgs(t,e){imgPrev=t.find("img").attr("src"),imgNext=e.find("img").attr("src"),$(".apart_slider_nav .prev_image div").hide().fadeIn(600).css("background-image","url("+imgPrev+")"),$(".apart_slider_nav .next_image div").hide().fadeIn(600).css("background-image","url("+imgNext+")")}function onInitApartSlider(){var t=$(".apart_slider .slick-current"),e=t.next(),i=$(".apart_slider .slick-slide").length;changeImgs($('.apart_slider .slick-slide[data-slick-index="'+(i-1)+'"]'),e)}function scrollParam(t){var e=t.mcs.draggerTop,i=$(".apart.current"),r=[];$(".apart").each(function(){r.push($(this).offset().top)});var a=closest(e,r);i.removeClass("current"),$(".apart:nth-child("+a+")").addClass("current"),$(".premises_filter input[type=radio]").prop("checked",!1),$(".premises_filter li:nth-child("+a+") input[type=radio]").prop("checked",!0)}function closest(t,e){for(var i=e[0],r=0,a=Math.abs(t-i),n=0;n<e.length;n++){var s=Math.abs(t-e[n]);s<a&&(a=s,i=e[n],r=n)}return r+=1}function initRangeFilter(){var t=100*leftHandle.outerWidth()/$(".range-slider").width(),e=100*rightHandle.outerWidth()/$(".range-slider").width(),i=rightHandle.outerWidth(),r=leftHandle.closest(".range-slider"),a=r.width(),n=100-t-e;leftLine.width(0).css("left","0%"),rightLine.width(0).css("left","100%"),rightHandle.css("left",a-i-1),centerLine.width(n+"%").css("left",leftHandle.outerWidth()),leftHandle.css("left",parseInt(leftHandle.css("left"))/(leftHandle.parent().width()/100)+"%"),rightHandle.css("left",parseInt(rightHandle.css("left"))/(rightHandle.parent().width()/100)+"%")}function onResizeRangeFilter(){$(".range-slider").each(function(){var t=$(this),e=(t.find(".ui-slider-range-left"),t.find(".ui-slider-range-right")),i=t.find(".ui-slider-range"),r=t.find(".left-handle"),a=t.find(".right-handle"),n=t.width(),s=100*parseInt(r.css("left"))/n;lftHW=100*r.outerWidth()/n,rgtHW=100*a.outerWidth()/n,rgtHP=100*parseInt(a.css("left"))/n,rgtLW=100-(rgtHP+rgtHW),cntrHP=s+lftHW,cntrHW=100-(cntrHP+100-rgtHP),i.css("left",cntrHP+"%").width(cntrHW+"%"),e.css("left",rgtHP+rgtHW+"%")}),$(".left-handle").each(function(){var t=$(this),e=$(".range-slider").width(),i=100*parseInt(t.css("left"))/e,r=2.61*$(window).width()/100,a=i/100*r+4;$(this).css("left",parseInt($(this).css("left"))/($(this).parent().width()/100)+"%"),$(this).hasClass("moved")&&($(this).width(a).height(a),mgnCircle=t.outerWidth()/2,t.css("margin-top",-mgnCircle)),startMove(this,1),rangeFilter(this,1),changeValues(this,2)}),$(".right-handle").each(function(){var t=$(this),e=$(".range-slider").width(),i=100*parseInt(t.css("left"))/e,r=2.61*$(window).width()/100,a=i/100*r+4;$(this).css("left",parseInt($(this).css("left"))/($(this).parent().width()/100)+"%"),$(this).hasClass("moved")&&($(this).width(a).height(a),mgnCircle=t.outerWidth()/2,t.css("margin-top",-mgnCircle)),startMove(this,2),rangeFilter(this,2),changeValues(this,2)})}function rangeFilter(t,e){var i=$(t),r=$(".range-slider").width(),a=parseInt(i.css("left")),n=100*i.outerWidth()/r,s=100*a/r,l=i.closest(".range-slider").find(".ui-slider-range");i.closest(".range-slider");1==e?(rightHandle=i.closest(".range-slider").find(".right-handle"),rightPos=100*parseInt(rightHandle.css("left"))/r,leftPos=100*(a+n)/r,line=i.closest(".range-slider").find(".ui-slider-range-left"),widhtCenter=100-(s+n+(100-rightPos)),line.width(s+"%"),l.css("left",s+n+"%").width(widhtCenter+"%"),mgnCircle=i.outerWidth()/2,i.css("margin-top",-mgnCircle)):(leftHandle=i.closest(".range-slider").find(".left-handle"),leftWidth=100*leftHandle.outerWidth()/r,leftPos=100*parseInt(leftHandle.css("left"))/r,rightPos=100*a/r,widhtCenter=100-(leftWidth+leftPos+(100-rightPos)),line=i.closest(".range-slider").find(".ui-slider-range-right"),line.width(100-s-n+"%").css("left",s+n+"%"),l.css("left",leftWidth+leftPos+"%").width(widhtCenter+"%"),mgnCircle=i.outerWidth()/2,i.css("margin-top",-mgnCircle))}function changeValues(t,e){var i=$(t).closest(".range-slider"),r=$(".range-slider").width(),a=i.find(".left-limit-value"),n=i.find(".right-limit-value"),s=i.find(".left-handle"),l=100*parseInt(s.css("left"))/r,o=i.find(".right-handle"),h=100*parseInt(o.css("left"))/r,d=100*o.outerWidth()/r,c=a.data("value"),p=n.data("value"),g=p-c,f=Math.round(l*g/100+c),m=Math.round((h+d)*g/100+c),u=i.find("input[name=full-area-from]"),v=i.find("input[name=full-area-to]");0==u.length&&(u=i.find("input[name=price-from]"),v=i.find("input[name=price-to]")),1==e?(s.attr("data-value",f),u.val(f)):(o.attr("data-value",m),v.val(m))}function startMove(t,e){var i=$(t),r=i.closest(".range-slider"),a=$(".range-slider").width(),n=100*$(t).outerWidth()/a,s=100*parseInt(i.css("left"))/a,l=r.find(".left-limit-value"),o=r.find(".right-limit-value");circle=2.61*$(window).width()/100,widthH=s/100*circle+4,i.addClass("moved").width(widthH).height(widthH),(0==s||s+n>=100)&&i.removeClass("moved").css({width:"2.61vw",height:"2.61vw"}),window.matchMedia("(max-width: 1024px)").matches&&(circle=7.2*$(window).width()/100,widthH=s/100*circle+4,widthH<11&&(widthH=11),i.addClass("moved").width(widthH).height(widthH),(0==s||s+n>=100)&&i.removeClass("moved").css({width:"7.2vmin",height:"7.2vmin"})),1==e?s>0?l.fadeIn():l.hide():s+n<100?o.fadeIn():o.hide()}function rightMoveLimit(t,e){var i=$(t),r=i.outerWidth(),a=i.closest(".range-slider"),n=a.find(".left-handle"),s=n.outerWidth(),l=parseInt(n.css("left")),o=a.width();return e>=o-r?e=o-r:e<=s+l&&(e=s+l),e}function leftMoveLimit(t,e){var i=$(t),r=i.outerWidth(),a=i.closest(".range-slider"),n=a.find(".right-handle"),s=parseInt(n.css("left"));return e+r>=s&&(e=s-r),e}function hoverSvg(t){var e=$(t),i=e.data("link"),r=e.closest(".premise_media").find("a[data-link="+i+"]"),a=e.closest(".premise").find(".premise_info td:nth-child(1) .num"),n=e.closest(".premise").find(".premise_info td:nth-child(2) .num"),s=r.data("size"),l=r.data("price");e.closest("svg").find("polygon, path, rect").removeClass("active"),e.addClass("active"),s&&a.hide().html(s+"<span>м<sup>2</sup></span>").stop().fadeIn(700),l&&n.hide().html(l+"<span>грн/м<sup>2</sup></span>").stop().fadeIn(700)}function getCookie(t){for(var e=t+"=",i=decodeURIComponent(document.cookie),r=i.split(";"),a=0;a<r.length;a++){for(var n=r[a];" "==n.charAt(0);)n=n.substring(1);if(0==n.indexOf(e))return n.substring(e.length,n.length)}return""}$(".apart_slider").slick({infinite:!0,slidesToShow:1,slidesToScroll:1,fade:!0,arrows:!0,speed:600});var apartImgsLen=$(".apart_slider").find("img").length;if(apartImgsLen<2&&$("body").addClass("single-img"),window.matchMedia("(min-width: 992px)").matches){var apartHeight=$(".apart .left_block").height(),apartInfo=$(".apart_info").outerHeight(!0),roomsHeight=apartHeight-apartInfo+5;$(".apart").height(apartHeight),$(".rooms ol").height(roomsHeight)}if($(".apart_inside_page").animate({opacity:1},600),$(".aparts").animate({opacity:1},200),sliderFlag=0,$(".apart_slider").on("beforeChange",function(t,e,i,r){var a=$(".apart_slider .slick-slide").length,n=r+1;n>=a&&(n=0),sliderFlag>r?i-2<0?i=a-1:i-=2:r==a-1&&(i=r-1,n=0),changeImgs($(this).find('.slick-slide[data-slick-index="'+i+'"]'),$(this).find('.slick-slide[data-slick-index="'+n+'"]')),sliderFlag=r}),$(".apart .next_image").on("click",function(){$(".slick-next").click()}),$(".apart .prev_image").on("click",function(){$(".slick-prev").click()}),onInitApartSlider(),window.matchMedia("(min-width: 992px)").matches){var apartHeight=$(".apart .left_block").height(),apartInfo=$(".apart_info").outerHeight(!0),roomsHeight=apartHeight-apartInfo+5;$(".apart").height(apartHeight),setTimeout(function(){apartHeight=$(".apart .left_block").height(),$(".apart_inside").height(apartHeight),$(".parent_premise").height($(".parent_premise > div").height())},100),$(".rooms ol").height(roomsHeight),$(".wrap_parent_premise").height(roomsHeight),$(".rooms ol").mCustomScrollbar();var share=$(".apart .share").height()+10,amount;amount=10!=share?$(".apart:first-child").outerHeight(!0)-share:$(".apart:first-child").outerHeight(!0),$(".app-list").mCustomScrollbar({alwaysShowScrollbar:1,mouseWheel:{scrollAmount:amount},callbacks:{onScroll:function(){var t=this.mcs.draggerTop,e=$(".apart.current"),i=[];$(".apart").each(function(){i.push($(this).offset().top)});var r=closest(t,i);e.removeClass("current"),$(".apart:nth-child("+r+")").addClass("current"),$(".premises_filter input[type=radio]").prop("checked",!1),$(".premises_filter li:nth-child("+r+") input[type=radio]").prop("checked",!0)},onInit:function(){testFun()}},whileScrolling:function(){console.log("Scrolling...")},advanced:{updateOnContentResize:!0}});var scrollFlag=!0;$(".prem-list").mCustomScrollbar({alwaysShowScrollbar:1,mouseWheel:{scrollAmount:amount},callbacks:{whileScrolling:function(t){var e=this.mcs.top;e<=20-amount&&scrollFlag&&(scrollFlag=!1,$(".prem-list").mCustomScrollbar("stop",!0),scrollParam(this)),e>-100&&(scrollFlag=!0)},onScroll:function(){scrollParam(this)}},advanced:{updateOnContentResize:!0}}),$(window).on("resize",function(){share=$(".apart .share").height()+10,apartHeight=$(".apart .left_block").height(),apartInfo=$(".apart_info").outerHeight(!0),roomsHeight=apartHeight-apartInfo,$(".apart").height(apartHeight),$(".rooms ol").height(roomsHeight),$(".wrap_parent_premise").height(roomsHeight),$(".parent_premise").height($(".parent_premise > div").height()),amount=$(".apart.current").outerHeight(!0)-share,$(".aparts_list").mCustomScrollbar("update",{mouseWheel:{scrollAmount:amount}})})}lightbox.option({albumLabel:"%1/%2",positionFromTop:0,wrapAround:!0,resizeDuration:300,imageFadeDuration:400}),$("a").on("click",function(){$(this).attr("data-lightbox")&&$(".wrapper").addClass("lightboxOpened")}),$(window).on("resize",function(){$("#lightboxOverlay").hide(),$("#lightbox").hide(),$(".wrapper").removeClass("lightboxOpened")}),$(window).on("load",function(){$("#lightbox, #lightbox .lb-close").on("click",function(){$(".wrapper").removeClass("lightboxOpened")});var t,e=$(window).width();t=e>=1800?70:e>=1400?50:30;var i=wrap.find(".sub_header"),r=i.height()+i.offset().top+40,a=$(".footer").height()+t;$(".aparts_list").css({height:$(window).height()-r-a})}),$(".premises_filter input[type=radio]").on("click",function(){floor=$(this).data("floor"),floorDiv=$(".premise[data-floor="+floor+"]"),topF=floorDiv.position().top,$(".aparts_list").mCustomScrollbar("scrollTo",topF,{callbacks:{whileScrolling:function(){console.log("Scrolling...")}}})});var leftLine=$(".ui-slider-range-left"),rightLine=$(".ui-slider-range-right"),centerLine=$(".ui-slider-range"),leftHandle=$(".left-handle"),rightHandle=$(".right-handle");$(".left-handle, .right-handle").on("mousedown",function(){$(this).hasClass("left-handle")?(startMove(this,1),rangeFilter(this,1)):(startMove(this,2),rangeFilter(this,2))}),0!=leftHandle.length&&leftHandle.draggable({axis:"x",containment:"parent",drag:function(t,e){var i=e.position.left;e.position.left=leftMoveLimit(this,i),startMove(this,1),rangeFilter(this,1),changeValues(this,1)},stop:function(){$(this).css("left",parseInt($(this).css("left"))/($(this).parent().width()/100)+"%"),filterApart(this)}}),0!=rightHandle.length&&rightHandle.draggable({axis:"x",containment:"parent",drag:function(t,e){var i=e.position.left;e.position.left=rightMoveLimit(this,i),startMove(this,2),rangeFilter(this,2),changeValues(this,2)},stop:function(){$(this).css("left",parseInt($(this).css("left"))/($(this).parent().width()/100)+"%"),filterApart(this)}}),initRangeFilter(),$(window).on("resize",function(){onResizeRangeFilter()});var firstElem1=$(".apart:nth-child(1) polygon[data-link=1]"),firstElem2=$(".apart:nth-child(2) path[data-link=1]");hoverSvg(firstElem1),hoverSvg(firstElem2),$("polygon, path, rect").on("mouseover",function(){hoverSvg(this)}),$(".premise_media polygon, premise_media path, .premise_media rect, .parent_premise polygon, parent_premise path, .parent_premise rect").on("click",function(){var t=$(this).data("link"),e=$(this).closest("div").find("a[data-link="+t+"]"),i=e.attr("href");i&&(window.location.href=i,document.cookie="room="+t+";path=/;domain=")});var room=getCookie("room"),premise=$(".parent_premise *[data-link=1]");room&&(premise=$(".parent_premise *[data-link="+room+"]")),hoverSvg(premise),$(".parent_premise svg").on("mouseleave",function(){hoverSvg(premise)});var wrap=$(".wrapper"),appendClose=new $.Deferred;appendClose.resolve(wrap.find(".form-wrap").append('<a class="lb-close close-form"></a>')),wrap.find(".show_more").click(function(t){t.preventDefault(),wrap.find(".form-wrap").addClass("active")}),appendClose.done(wrap.find(".close-form").click(function(){wrap.find(".form-wrap").removeClass("active")}));